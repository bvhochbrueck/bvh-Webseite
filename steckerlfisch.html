<!-- steckerlfisch.html (korrigiert) -->
<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Steckerlfisch — Burschenverein Hochbrück</title>

  <!-- Favicon -->
  <link rel="icon" href="/assets/images/logo.svg" type="image/svg+xml">
  <link rel="icon" href="/assets/images/logo.png" type="image/png">

  <!-- Zentrale CSS (enthält jetzt auch die Form-Styles) -->
  <link rel="stylesheet" href="/assets/css/style.css">

  <!-- Nav JS: mit defer geladen, damit die Funktionen verfügbar sind nachdem das DOM geparst ist -->
  <script src="/assets/js/nav.js" defer></script>

  <style>
    /* Hinweis-Banner zentriert und im Design passend (korrigierte Syntax) */
    #locked {
      display: none;
      text-align: center;
      padding: 80px 20px;
      background: #fff8e1; /* sanftes Gelb */
      border: 2px solid #e0a800;
      border-radius: 12px;
      max-width: 600px;
      margin: 100px auto;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      font-family: sans-serif;
    }

    #locked h1 {
      font-size: 2rem;
      margin-bottom: 10px;
      color: #b58900; /* warmes Orange-Braun */
    }

    #locked p {
      font-size: 1.2rem; /* Rechtschreibung korrigiert */
      color: #333;
    }

    /* Normaler Seiteninhalt: standardmäßig ausgeblendet, damit kein FOUC (Flash of content) passiert.
       Das Skript zeigt das passende Element (content oder locked). */
    #content {
      display: none;
    }

    /* Optional: kleine Responsivity-Anpassung für das Banner */
    @media (max-width:600px) {
      #locked { margin: 40px 16px; padding: 36px 14px; }
      #locked h1 { font-size: 1.5rem; }
      #locked p { font-size: 1rem; }
    }
  </style>
</head>
<body class="page-other has-bg">

  <!-- Header wird per include eingefügt -->
  <div id="site-header"></div>

  <!-- NEU für Datums-Blockierung: id="content" (wird vom Script angezeigt wenn freigegeben) -->
  <main id="content" class="container">
    <h1>Steckerlfisch</h1>
    <p>Hier kannst du deine Steckerlfisch-Bestellungen für Karfreitag abgeben.</p>

    <!-- RESPONSIVES FORM-WRAPPER: Breite passt sich jetzt automatisch an -->
    <div class="form-wrapper">
      <iframe
        src="https://docs.google.com/forms/d/e/1FAIpQLSfFWT3I9d1nO7yCsFaNxMHtl0fxX4CEor6ZVd2F7fblLYXyJg/viewform?embedded=true"
        title="Steckerlfisch-Bestellung"
        frameborder="0"
        marginheight="0"
        marginwidth="0"
        loading="lazy">
        Wird geladen…
      </iframe>
    </div>

    <p class="form-alt">
      Formular nicht sichtbar?
      <a href="https://forms.gle/Yy2mfJ7rFSqrCb9A8" target="_blank" rel="noopener">Formular im neuen Tab öffnen</a>
    </p>
    <p>Bei Problemen bitte bei uns melden: 
      <a href="mailto:bestellung.bvh@gmail.com">bestellung.bvh@gmail.com</a>
    </p>

  </main>

  <!-- Gesperrte Ansicht (Textdatum wird automatisch gesetzt) -->
  <div id="locked" aria-hidden="true">
    <h1>⚠️ Seite gesperrt!</h1>
    <p>Diese Seite ist erst wieder ab dem <strong id="release-date"></strong> verfügbar.</p>
  </div>

  <!-- SCRIPT: Datumsprüfung -->
  <script>
    // Konfiguration: Freigabe-Datum einstellen (Jahr, Monat-1, Tag)
    const releaseDate = new Date(2026, 0, 1); // 1. Januar 2026
    const now = new Date();

    // Schreibe das lesbare Datum automatisch in den Hinweistext
    const dateOptions = { day: 'numeric', month: 'long', year: 'numeric' };
    const releaseDateEl = document.getElementById('release-date');
    if (releaseDateEl) {
      releaseDateEl.textContent = releaseDate.toLocaleDateString('de-DE', dateOptions);
    }

    // Sichtbarkeits-Logik (sicherheitsorientiert, prüft, ob die Elemente existieren)
    const contentEl = document.getElementById('content');
    const lockedEl = document.getElementById('locked');

    if (now < releaseDate) {
      // noch gesperrt
      if (contentEl) contentEl.style.display = 'none';
      if (lockedEl) lockedEl.style.display = 'block';
    } else {
      // freigegeben
      if (lockedEl) lockedEl.style.display = 'none';
      if (contentEl) contentEl.style.display = 'block';
    }
  </script>

  <!-- Footer wird per include geladen und initNav() wird anschließend in initPage() gestartet -->
  <div id="site-footer"></div>

  <script>
    // Lade Header & Footer per fetch + initNav() aufrufen (wie bereits etabliert)
    async function loadInclude(id, path){
      const el = document.getElementById(id);
      if(!el) return;
      try {
        const r = await fetch(path);
        if(!r.ok) return;
        el.innerHTML = await r.text();
        const yearSpan = document.getElementById('year');
        if(yearSpan) yearSpan.textContent = new Date().getFullYear();
      } catch(e){ console.warn('Include laden fehlgeschlagen', e); }
    }

    (async function initPage(){
      // Header + Footer einfügen
      await loadInclude('site-header','/includes/header.html');
      await loadInclude('site-footer','/includes/footer.html');

      // initNav() aus nav.js aufrufen (nav.js ist via defer geladen, also verfügbar)
      if (typeof initNav === 'function') {
        initNav();
      } else {
        console.warn('initNav() nicht gefunden. Prüfe /assets/js/nav.js');
      }
    })();
  </script>
</body>
</html>
