<!-- steckerlfisch.html -->
<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Steckerlfisch — Burschenverein Hochbrück</title>

  <!-- Favicon -->
  <link rel="icon" href="/assets/images/logo.svg" type="image/svg+xml">
  <link rel="icon" href="/assets/images/logo.png" type="image/png">

  <!-- Zentrale CSS (enthält jetzt auch die Form-Styles) -->
  <link rel="stylesheet" href="/assets/css/style.css">

  <style> 
    /* Hinweis-banner zentriert und im Design passend */
    #locked {
      display: none;
      text-align: center;
      padding: 80px 20px;
      background: 'fff8e1; /* sanftes gelb*/ 
      border: 2px solid #e0a800; 
      border-radius: 12px;
      max-width: 600px;
      margin: 100px auto; 
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      font-family: sans-serif;
    }

    #locked h1 {
      font-size: 2rem;
      margin-bottom: 10px;
      color: #b58900; /* warmes orange-braun */ 
    }

    #locked p {
      font-sice: 1.2rem; 
      color: #333;
    }

    /* Normaler Seiteninhalt, wird standardmäßig angezeigt */
    #content { 
      display: block;
    } 

    
  </style>

  <!-- Nav JS (enthält initNav()) -->
  <script src="/assets/js/nav.js"></script>
</head>
<body class="page-other has-bg">

  <!-- Header wird per include eingefügt -->
  <div id="site-header"></div>

  <!-- NEU für Datums-Blockierung: id="content" -->
  <main id="content" class="container">
    <h1>Steckerlfisch</h1>
    <p>Hier kannst du deine Steckerlfisch-Bestellungen für Karfreitag abgeben.</p>

    <!-- RESPONSIVES FORM-WRAPPER: Breite passt sich jetzt automatisch an -->
    <div class="form-wrapper">
      <iframe
        src="https://docs.google.com/forms/d/e/1FAIpQLSfFWT3I9d1nO7yCsFaNxMHtl0fxX4CEor6ZVd2F7fblLYXyJg/viewform?embedded=true"
        title="Steckerlfisch-Bestellung"
        frameborder="0"
        marginheight="0"
        marginwidth="0"
        loading="lazy">
        Wird geladen…
      </iframe>
    </div>

    <p class="form-alt">
      Formular nicht sichtbar? 
      <a href="https://forms.gle/Yy2mfJ7rFSqrCb9A8" target="_blank" rel="noopener">Formular im neuen Tab öffnen</a>
    </p>
  </main>

  
  <!-- gesperrte Ansicht --> 
  
  <div id="locked">
    <h1> ⚠️ Seite gesperrt! </h1>
    <p>Diese Seite ist erst ab dem <strong id="releaseDate"></strong> verfügbar.</p>
  </div>

  <script src="/assets/js/nav.js"></script>
  <script> 
    //Datum der Freigabe (Jahr, Monat-1,Tag) 
    const releaseDate = new Date(2026, 0, 1); //14.9.25 
    const now = new Date();

    // Datum automatisch ins HTML schreiben
    const dateOptions = { day: 'numeric', month: 'long',  year: 'numeric' };
    document.getElementById('release-date').textContent = releaseDate.toLocaleDateString('de-DE', dateOptions);

    if (now < releaseDate) {
      // Seite ist noch gesperrt, zeige Hinweis 
      document.getElementById('content'.style.display = 'none';
      document.getElementById('locked'.style.display = 'block';
    } else {
      // Seite ist freigegeben, zeige normalen Inhalt 
      document.getElementById('content'.style.display = 'block';
      document.getElementById('locked'.style.display = 'none';
    }
  </script>


  

  <div id="site-footer"></div>

  <script>
    /* 
      WICHTIG: Wir müssen warten, bis Header & Footer per fetch() geladen sind,
      bevor wir initNav() (in /assets/js/nav.js) aufrufen.
      Deshalb: await loadInclude(...).
    */
    async function loadInclude(id, path){
      const el = document.getElementById(id);
      if(!el) return;
      try {
        const r = await fetch(path);
        if(!r.ok) return;
        el.innerHTML = await r.text();
        const yearSpan = document.getElementById('year');
        if(yearSpan) yearSpan.textContent = new Date().getFullYear();
      } catch(e){ console.warn('Include laden fehlgeschlagen', e); }
    }

    (async function initPage(){
      // Lade Header + Footer (wartet, bis fertig)
      await loadInclude('site-header','/includes/header.html');
      await loadInclude('site-footer','/includes/footer.html');

      // Jetzt initNav() aus nav.js aufrufen — markiert aktive Links und setzt Dropdown-Click.
      if(typeof initNav === 'function'){
        initNav();
      } else {
        console.warn('initNav() nicht gefunden. Prüfe /assets/js/nav.js');
      }
    })();
  </script>
</body>
</html>
