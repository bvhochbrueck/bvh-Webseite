<!-- index.html -->
<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Burschenverein Hochbrück — Start</title>

  <!-- Favicon: automatisch aus dem assets/images-Ordner -->
  <link rel="icon" href="/assets/images/logo.svg" type="image/svg+xml">
  <!-- PNG-Fallback (optional): legt ihr eine logo.png ins selbe Verzeichnis -->
  <link rel="icon" href="/assets/images/logo.png" type="image/png">

  <link rel="stylesheet" href="/assets/css/style.css">
</head>
<body class="page-index">

  <div id="site-header"></div>

  <main class="container">
    <section class="hero hero-centered">
      <div class="logo-wrap" aria-hidden="true">
        <img src="/assets/images/logo.png" alt="" class="hero-logo">
        <!-- davor: <img src="/assets/images/logo.png" alt="" class="hero-logo"> -->
      </div>

      <h1 class="hero-title">Burschenverein Hochbrück</h1>
      <p class="hero-sub">Dahoam im schönsten Ort der Welt</p>
    </section>

    <!-- Jetzt FULL WIDTH stacked: zuerst Info, dann Termine -->
    <section class="two-cards">
      <article class="card" id="verein-info">
        <h2>Über den Verein</h2>
        <p>Der Burschenverein Hochbrück pflegt Tradition und Gemeinschaft. Wir organisieren Feste, unterstützen Projekte und treffen uns regelmäßig.</p>
        <p><a class="link" href="chronik.html">Mehr zur Chronik</a></p>
        <p>Hier könnt ihr Infos über unsere Vorstände erfahren.</p>
        <p><a class="link" href="vorstaende.html">Vorstände</a></p>
      </article>

      <article class="card" id="termine">
        <h2>Termine</h2>
        <ul>
          <li><strong>18. Oktober 2025</strong> — Weinfest</li>
          <li><strong>23. Dezember 2025</strong> — Weihnachtsfeier</li>
        </ul>
      </article>
    </section>
  </main>

  <div id="site-footer"></div>

  <script>
    /* Lade Header/Footer per fetch und initialisiere die Navigation (Dropdown) */
    async function loadInclude(id, path){
      const el = document.getElementById(id);
      if(!el) return;
      try {
        const r = await fetch(path);
        if(!r.ok) return;
        el.innerHTML = await r.text();
        const yearSpan = document.getElementById('year');
        if(yearSpan) yearSpan.textContent = new Date().getFullYear();
      } catch(e){ console.warn('Include laden fehlgeschlagen', e); }
    }

    function markActiveNav(){
      const nav = document.querySelector('.main-nav');
      if(!nav) return;
      const links = nav.querySelectorAll('a');
      const cur = location.pathname.split('/').pop() || 'index.html';
      links.forEach(a=>{
        const href = a.getAttribute('href');
        if(href === cur || (href === 'index.html' && cur === 'index.html')) a.classList.add('active');
      });
      // Falls ein aktives Item im Dropdown ist: markiere the dropdown button too
      const active = nav.querySelector('a.active');
      if(active){
        const parent = active.closest('.dropdown');
        if(parent){
          const btn = parent.querySelector('.dropbtn');
          if(btn) btn.classList.add('active');
        }
      }
    }

    function setupDropdowns(){
      const dropdowns = document.querySelectorAll('.dropdown');
      dropdowns.forEach(dd => {
        const btn = dd.querySelector('.dropbtn');
        const menu = dd.querySelector('.dropdown-menu');
        if(!btn || !menu) return;

        // Schließe das Menü, wenn irgendwo anders geklickt wird
        document.addEventListener('click', (ev) => {
          if(!dd.contains(ev.target)){
            btn.setAttribute('aria-expanded','false');
            dd.setAttribute('aria-expanded','false');
            menu.classList.remove('open');
          }
        });

        // Klick auf den Button toggelt das Menü (funktioniert auf Touch)
        btn.addEventListener('click', (e)=>{
          e.stopPropagation();
          const expanded = btn.getAttribute('aria-expanded') === 'true';
          btn.setAttribute('aria-expanded', String(!expanded));
          dd.setAttribute('aria-expanded', String(!expanded));
          menu.classList.toggle('open', !expanded);
        });

        // optional: keyboard support (ESC schließt)
        btn.addEventListener('keydown', (e)=>{
          if(e.key === 'Escape'){ btn.setAttribute('aria-expanded','false'); menu.classList.remove('open'); }
        });
      });
    }

    // Einbinden + initialisieren
    (async function init(){
      await loadInclude('site-header','/includes/header.html');
      await loadInclude('site-footer','/includes/footer.html');
      markActiveNav();
      setupDropdowns();
    })();
  </script>
</body>
</html>
